# MockFactory.io - Staging Environment Configuration
# Generated: 2026-02-11
# DO NOT COMMIT THIS FILE TO VERSION CONTROL

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Using containerized PostgreSQL for staging (sufficient for 10-50 users)
DATABASE_URL=postgresql://mockfactory:2f41d7917bc278bdab73f8b08a138870@postgres:5432/mockfactory
REDIS_URL=redis://redis:6379/0

# PostgreSQL container credentials
POSTGRES_USER=mockfactory
POSTGRES_PASSWORD=2f41d7917bc278bdab73f8b08a138870
POSTGRES_DB=mockfactory

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# Cryptographically secure secret key for JWT signing
SECRET_KEY=22366dd7e1dfe5d4d2e21ddd2a9cfa42173e8fbd61d748984280ebb0030682f2
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# OAUTH/OIDC CONFIGURATION (Authentik SSO)
# ============================================================================
# TODO: Configure Authentik for staging.mockfactory.io
# For now, using placeholder values - authentication will fail until configured
OAUTH_CLIENT_ID=staging_client_id_placeholder
OAUTH_CLIENT_SECRET=staging_client_secret_placeholder
OAUTH_AUTHORIZE_URL=https://auth.mockfactory.io/application/o/authorize/
OAUTH_TOKEN_URL=https://auth.mockfactory.io/application/o/token/
OAUTH_USERINFO_URL=https://auth.mockfactory.io/application/o/userinfo/
OAUTH_LOGOUT_URL=https://auth.mockfactory.io/application/o/mockfactory/end-session/
OAUTH_PROVIDER_NAME=Authentik

# ============================================================================
# STRIPE PAYMENT CONFIGURATION
# ============================================================================
# Using test keys for staging - no real charges will be made
# TODO: Replace with actual Stripe test keys if testing payments
STRIPE_SECRET_KEY=sk_test_staging_placeholder
STRIPE_PUBLISHABLE_KEY=pk_test_staging_placeholder
STRIPE_WEBHOOK_SECRET=whsec_staging_placeholder

# Stripe Product IDs (from production setup - reuse for staging)
STRIPE_PRODUCT_PROFESSIONAL=prod_TwSnP2zvU6EZyW
STRIPE_PRICE_PROFESSIONAL=price_1SyeXnRzkrRnzwVv1arzLFJb
STRIPE_PRODUCT_GOVERNMENT=prod_TwXeoGOgLRUGsu
STRIPE_PRICE_GOVERNMENT=price_1SyejTRzkrRnzwVvk17pxCWn
STRIPE_PRODUCT_ENTERPRISE=prod_TwY3j6hqzh4gaA
STRIPE_PRICE_ENTERPRISE=price_1SyeyiRzkrRnzwVvHYM4Kif4

# ============================================================================
# DOCKER SECURITY CONFIGURATION
# ============================================================================
# Docker socket proxy handles these - don't change
DOCKER_SOCKET=/var/run/docker.sock
MAX_EXECUTION_TIME=30
MAX_MEMORY_MB=256
MAX_CPU_QUOTA=50000

# ============================================================================
# USAGE LIMITS (Per-tier execution limits)
# ============================================================================
RUNS_ANONYMOUS=5
RUNS_BEGINNER=10
RUNS_STUDENT=25
RUNS_PROFESSIONAL=100
RUNS_GOVERNMENT=500
RUNS_ENTERPRISE=-1
RUNS_CUSTOM=-1
RUNS_EMPLOYEE=-1

# Employee domain for automatic tier assignment
AFTERDARK_EMPLOYEE_DOMAIN=@afterdarksystems.com

# ============================================================================
# API CONFIGURATION
# ============================================================================
API_V1_PREFIX=/api/v1

# CORS Origins - Allow staging domain and localhost for testing
CORS_ORIGINS=["http://localhost:3000","http://localhost:8000","https://staging.mockfactory.io","https://mockfactory.io"]

# ============================================================================
# OCI CONFIGURATION
# ============================================================================
# These are set in docker-compose.prod.yml and point to Docker secrets
# OCI_CONFIG_FILE=/run/secrets/oci_config
# OCI_KEY_FILE=/run/secrets/oci_key

# OCI Compartment ID (from user's requirements)
# Used by environment_provisioner.py for bucket creation
OCI_COMPARTMENT_ID=ocid1.compartment.oc1..aaaaaaaaqzzabys3xbxcbektqibdhzm6vtfmudya2fcuhmtzkhkow4sub3na

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
# Environment: STAGING
# Expected Load: 10-50 alpha testers
# Database: Containerized PostgreSQL (sufficient for staging)
# Object Storage: OCI Object Storage (us-ashburn-1 region)
# Estimated Cost: $4-66/month
# SSL: Let's Encrypt (configure with Certbot)
# Monitoring: Docker health checks + /health endpoint
#
# To deploy:
#   docker compose -f docker-compose.prod.yml --env-file .env.staging up -d
#
# To view logs:
#   docker compose -f docker-compose.prod.yml logs -f api
#
# To stop:
#   docker compose -f docker-compose.prod.yml down
#
# To destroy (including volumes):
#   docker compose -f docker-compose.prod.yml down -v
